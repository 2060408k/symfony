# Register Service

The markdown transformer class, will sadly not be turning into a crime fighting robot. But it is a service because it does some work for us.  That’s pretty similar to the markdown parser which is a service or the logger which is a service, which is kind of making me wonder, every other service is in the service container, which I can see via debug, bin/console debug: container.  But our markdown transformer is not part of the container anymore.  It’s just an object that we can create if we want to.
So here’s what I want. I would love to be able to just say transformer=this->get and then apt.transformer and have the container instantiate it for me.  So let’s do that and then I’m gonna talk about why that’s such a cool thing. 
Now effectively what we’re gonna do is we’re gonna train the container on how to instantiate our markdown transformer so that we don’t have to anymore.  And the way you do that is an app config services.yml which already has some nice example coding there which I’m gonna clear out.  
Under the services key give your new service a nickname.  How about app.markdown_transformer?  Now in order for the container to be able to instantiate this it needs to know two things.  First it needs to know what the class is for our markdown transformer.  So I’m gonna say class: markdown_transformer.  The second thing that it needs to know are what constructor arguments it should pass when it instantiates this.  Let’s tell about those in an arguments key: and the two left square brackets which is an erase syntax.  
Now our markdown transformer has exactly one argument which is the markdown.parser service.  To tell us something about that type @markdown.parser.  And that’s it.  With just those four lines of configuration there’s now a new service in the container and Symfony knows exactly how to instantiate it.  The @ symbol we put in front of markdown.parser is special in this area.  If we left the @ symbol off then it would literally instantiate with the string markdown.parser.  But when we add the @ it knows to go get the service called markdown.parser and pass that.  So if you run bin/console debug: container markdown now you’ll see a new service in there; app.markdown_transformer.  
And that’s it.  We have added something to the container.  This is huge.  Let’s go to genus controller and use it.  Instead of new MarkDownTransformer, transformer=this->getapp.markdown_transformer.  And that’s it.  Symfony instantiates that object for us behind the scenes.
Now that may have seemed like a really simple thing.  We literally just centralized the instantiation of this object.  Instantiating objects is not that hard.  But there’s two major advantages to taking your service and registering it in the container.  The first is that this is just easier.  This ->get app.markdowntransformer, super simple.  So I can use this anywhere in my code and it’s always just as simple to instantiate the markdown transformer object.  The markdown transformer object could have ten construct arguments.  But now we don’t have to worry about that.  We just always ask for the app.markdowntransformer and Symfony figures out how to instantiate that object.  So that’s cool.
The second thing is that if you ask for the app.markdowntransformer service more than once during a request, Symfony only requests one of them.  And this is really good for performance.  You might not realize that you’re asking for the app.markdowntransformer class maybe ten times in a request.  But we don’t need ten markdown transformers.  We only need one.  Symfony’s container makes sure that there’s only ever one in the container.  And by the way, it doesn’t actually create the markdown transformer object until and unless somebody asks for it.  So just adding more services to your container does not slow down your application.
Now I’m gonna show you a really, really cool thing.  Ultimately, after Symfony parses this services.yml file, and really all of the configuration files, it dumps the container object down to a cache file.  So open up var, the var directory.  And inside there should be a cache directory.  And if there isn’t, make sure your php storm is set to the project mode because the project mode actually shows the directories that we’ve marked as excluded.  So go to var cache dev and then open AppDevDebugProjectContainer.php and search for markdown transformer.  There will be a string.  I’m gonna find the second one.  And you should find a getApp_MarkdownTransformerService.  
So quite literally, this dumped object is the container.  When we say this->getapp.markdown_transformer, ultimately this method is called behind the scenes.  And look what it does.  It literally writes the exact same code that we had a second ago; new MarkdownTransformer.  And then this->get because this is the container markdown.parser.  
Now if this doesn't make complete sense to you, the whole caching thing, don’t worry about it.  What I wanted to show you is that what we wrote in services.yml ultimately causes Symfony to instantiate our object just like we did before.  So there’s no magic going on behind the scenes.  We just describe how to instantiate our object.  And Symfony writes the php code behind the scenes that actually does that.  So this makes the container super, super fast.
