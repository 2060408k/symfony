# Auto Register Services

Let's go back to the simply standard edition. Look at the services I want to know. You'll find a couple of import sections, these are the most fundamental big difference that you'll see in iSymphony 3.3 service configuration. I want you to copy the first import to start. And head over to our service dot y and after default, so it doesn't really matter, I'm gonna paste that. Now, there, this is a super important line. This actually imports all classes from src/AppBundle as services. It automatically registers them. There's a few really important things.

First, the service ID for each service is the class name. And second, thanks to our defaults, means that all those new services are auto wired and auto configured. And the cool thing about this, is that it means that, in a lot of cases, you don't need to register your services at all anymore because just by putting a class in src/AppBundle, Symphony will try to auto wire and auto configure it. And if it can't auto wire it, as you'll see, you're gonna get a really clear exception. More in a second, isn't this completely insane? I mean, not all of my classes inside src/AppBundle are supposed to be services. I mean, like my data fixtures, for example. So the answer is, no, in fact you have the same number of services before and after this import line. To prove it, I'm gonna comment out this line, go to terminal, open a new tab, [inaudible 00:02:37] /bin/console debug container type WC-L.

To count the number of lines this returns. Okay, 262. Then I'm gonna uncomment this line, which means I'm importing all classes in src/AppBundle services. The go over and it gets the same number. How's that possible? Remember, all of these services are private. They're public false and that ends up being really important. It means that none of these new services can be referenced at one time via container arrow get. In Symphony's container is so incredible that right before it dumps the cached container, it finds all services that haven't been referenced and removed them from the container. So it means that even though it looks like we're important all classes inside of a src/AppBundle as services, that's not actually true. It's more that all classes in src/AppBundle are available to be used as services. We can reference them as arguments or we can auto wire them. But if you don't reference one of these classes, it's simply removed.

You'll also notice we've got this exclude key down here. And this actually becomes not that important. You can exclude certain files or directories, if you want to. But most of the time you want need to. Because, as I said, if you don't reference a class then it's just removed from the container anyways. However, if you do have entire directors full of Peachtree files that you know you don't want to be as services, like entity or repository, which you might want your repository register services. But, since they need to be created as factories, you would need to manually wire those anyways.

So by excluding these two directories, it means that Symphony, in some cases, Symphony won't try to rebuild the container if you modify these files. Giving you a slight performance boost in the debt environment. But my point, the exclude key is not that important. So, since every service ... has its ID - has its class name as its ID ... So the idea is that all classes are imported as services. And if you do need to further configure them, then you can go down here and repeat the class name and add whatever you need, like a tag. This will actually override the service that's imported, registered up there. But it's still auto wired and auto configured.

Now the one other import here is for the controller, I'm gonna copy that. And paste that as well. And what this does is it actually overrides the controller services registered in the first import, so that it can make them public true and give them a very special tag. Now, hold on a second, because in Symphony 3.3, your services do need to be public. And we'll talk about what that tag does. Now hold on a second, yes, this actually means that in Symphony 3.3 your controllers are services. And that's so awesome! Because you can still use all of your existing tricks. You can still extend Symphony's base controller. You can use its shortcuts. You can even still fetch things through public services directly from the container. But now, you can also use proper dependence injection if you want to. So, after all these changes, we're gonna actually get on here and remove two of these services. Both of these services are imported or auto registered and they don't need any further configuration so there's no point in having.

If we go back and refresh our app, everything still works fine. So the big change here is that all changes in app/AppBundle, Symphony's aware of all of them and you can use them immediately as services if you want to. And if you do need to add addition configuration then that's when you can configure it below, but it automates a lot of your configuration when you don't need it.

