# Easy Edit Form

When we first render our form right now, it’s completely blank so how can we add default data to this form? Well it turns out answering that question is exactly the same as answering the question “How do we create an edit form?” It turns out it’s almost identical. It’s really easy so let’s do it.
	
In Genus admin control, I’m gonna be lazy at first. I’m gonna copy the entire new action and update the URL to /genus/{id}/edit. Give it a route name of admin_genus_edit and call it editAction. Now our first job should be to query for a genus object. I’m gonna be lazy and just type in argument with Genus. And because of the param converter from SensioFrameworkExtraBundle that query will be made automatically for me based on the ID. 

So, how do I pass default data to the form? It’s as simple as this. The second argument to create form is the default data. Pass it the entire genus object. Why the entire genus object? Because remember, our form is bound to the genus class. That means it’s input should be genus and it’ll give us a genus back. Behind the scenes, when we pass it a genus object it will use the getter functions to prefill the form. So get name. And everything else is exactly the same. I’ll change the flash message but you get the idea.

Let’s turn to our new template. edit.html.twig and like I said, I’m gonna be lazy for a second and just completely duplicate that template. edit.html.twig and update the h1 to say Edit Genus. We’re gonna fix that duplication in a second. Then finally, on our admin list page, I already have a spot ready for us for an edit link so let’s fill that in with path(‘admin_genus_edit’ and then we’ll pass the second item. We’ll pas (‘id: genus.id and that should be it. 

So let’s go back to /admin/genus and aah, good explosion. Method “id” for object genus does not exist on list.html.twig line 25. So apparently I do not have a get ID function. Let’s check it out. And indeed, when I created this class, I did not add a getter for ID so I’ll do command N or code generate, select getter, there’s my ID right there. 

Alright. Let’s try it again. Refresh. No errors this time. Let’s edit that first one. Check that out. Completely prefilled with all of the data from our object. In fact, check out this weird looking test thing right here coming from fun fact. That is actually left over from a previous tutorial when we were using markdown. I had us hack in this test string here just temporarily so we could see markdown. So you could see very clearly that the form uses the getters. If the getters add something extra, we get that extra. So, that’s really interesting but let’s take that out. Now we’ll refresh. We’ll change the fun fact to have some exclamation points on there, hit enter, there it is. Genus updated. 

If we edit that we can see our exclamation points there. So the cool thing about the form fabric is form end points and data end points, they’re the exact same thing. It’s just that one of them gets passed some default data. Now, let’s quickly fix all of that duplication that I just had in edit and new.html.twig. So, there’s two points of duplication. First, is the form itself and second is some of the layout stuff that we have. So let’s fix this form first since this form is identical on both of those, let’s copy and remove it and in this directorial pragment _form.html.twig file and we’ll paste that stuff in there. 

Now in edit, we’ll just use the include function for admin/genus/_form.html.twig. Copy that, go into new and paste that there. Now, if there were any customizations that you needed to make based on the new or the edit, I would probably pass those in as additional variables. The second argument to include is an array of variables that you can pass into that template. So refresh now, everything still looks good. So let’s solve the last problem, which is this layout.

To solve this, we’re gonna need a shared layout between these two templates. So let’s create a new file called formLayout.html.twig and this’ll be just used by these two templates. Copy the extends all the way through the java scripts and delete that and paste it in here. So this template itself will extend based at html.twig but not before adding some style sheets and some java scripts. So in edit, we can now read the extends but now we’re going to extend the formLayout.html.twig. Copy that, go into new, we’ll do the same thing. Delete all of the java scripts and the style sheets, paste that new admin layout and there it is. Just using our twig tools to get rid of some duplication and we’re good. 

So that’s it for this introductory episode. I hope you guys feel dangerous and empower the forms. Really, they are not that hard. They do a lot of heavy lifting for you. They are amazing. Let me give you one word of warning because this is how I see people shoot themselves. Right now, our form is bound to our entity and that makes this form so easy to use. Where people get into problems is when they have to build form that doesn’t exactly look like their entity anymore. Maybe we have a couple of extra fields that we need inside this form for some reason but they’re not inside of the entity. 

When you run into this, here’s what I want you to do. Don’t bind your form to your entity class. Instead, create a brand new class. I usually put these classes actually inside my form directory. For example, genus model and create the exact properties on this new model class that you have inside of your form. Then, bind that new model class to your form and you can easily add validation constraints that new model class as always. The end result of this is that in genus controller, once you submit your form, if this form is bound to some new model class that’s not persistent to the database then that’s what you get back when you call form get data. 

So it means that you’re gonna have to do a little bit of extra work in your controller to take the data off of this model and put it back onto your entities. But this is gonna be really simple business logic. It’s gonna be easy to write. It’s gonna be easy to read. So one way or another, make sure that your forms map to a class but that class does not necessarily have to be an entity. Feel confident creating classes just to help your code outs.

Alright. We’re gonna talk more about forms in a couple future episodes but I hope you guys are feeling powerful. Go out, make some amazing forms, and I’ll see you next time.
